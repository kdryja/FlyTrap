\chapter{Introduction\label{chap:introduction}}

\section{Overview}
\subsection{Internet of Things}
Internet of Things, also known as IoT, is a growing field within technical industries and computer science. It is a notion first coined in \citet{ashton1999introduction} where the main focus was around RFID (radio-frequency identification) tags - which was a simple electromagnetic field usually created by small-factor devices in the form of a sticker capable of transferring static information, such as a bus timetable or URL of a website (e.g.\ attached to a poster promoting a company or an event). Ashton argued the concern of data consumption and collection being tied to human presence at all times. In order to mine information, human first was required to find relevant data source, which then could be appropriately evaluated. However, as it was accurately pointed out, people have limited resources \& time, and their attention could not be continuously focused on data capture. Technologist suggested delegating the task to the machines themselves; altogether remove the people from the supply chain. A question was asked, whether ``things'' could collect data from start to finish. That paper is known to be the first mention of IoT and building stone, de facto defining it as an interconnected system of devices communicating with each other without the need for manual intervention.

With time and ever-expanding presence of smartphones, personal computers and intelligent devices, the capabilities of those simple RFID tags were also growing beyond just a simple static data transmission functionalities. Following the observation by \citet{moore1965cramming}, the size of integrated circuits was halving from year to year, allowing us to put more computational power on devices decreasing in size. They were now not only capable of acting as a beacon, but actively process the collected information (for example, temperature) and then pass it along to a more powerful computer which then could make decisions on whether to increase or decrease the strength of radiators at home - all without any input from the occupants. Eventually, IoT found their way to fields and areas such as households (smart thermostats or even smart kettles), physical security (smart motion sensors and cameras) or medicine (smart pacemakers). This number is expected only to grow in the future. Inside CISO white paper \cite{evans2011internet}, scientists speculate that we might see 50 million of those devices by the end of 2020.

\subsection{Security of data}
The growing presence of smart-devices significantly increased the convenience and capabilities of ``smart-homes'' - at the same time, IoT also started handling more and more sensitive data - especially considering the last example from the previous paragraph. Scientists from the University of Massachusetts successfully performed an attack on a pacemaker \cite{4531149}, reconfiguring the functionality, which - if performed with malicious intents - could have tragic consequences. Nevertheless, even less extreme situations, such as temperature readings at home, are nowadays heavily regulated by data protection laws. Examples being the General Data Protection Regulation (GDPR) introduced by \citet{EUdataregulations2018} or California Consumer Privacy Act by \citet{CCPA}. Collection of data is required to be strictly monitored and frequently audited in case of a breach - which also includes restrictions on the collection of Personal Identifiable Information (PII, as per GDPR). Those and more put an obligation on every company willing to exchange user data to govern the data appropriately and ensure its security - which includes data collected by Internet of Things devices.

\subsection{MQTT}
IoTs are usually low-power with limited computational power - mostly to decrease the required maintenance and ensure long-lasting life, without the need of replacing the power source (which is often a fixed battery) - meaning that only minimum amount of work should be performed on the ``thing'' itself, instead of sending it off to a centralised structure (e.g., a server hosted on the cloud) for further processing. One of the popular choices includes an intermediary, a broker, relaying communication between clients connected to it. That way, Peer-to-Peer connection is not required and can be wholly delegated to separate backend server. A popular choice for the broker is MQTT (Message Queuing Telemetry Transport)\footnote{https://mqtt.org/} standard defining the exact shape and form of TCP packets, handling unexpected timeouts \& reconnects along with distributing channels of communication onto different topics containing separated information. From there, clients can either subscribe (i.e. consume) or publish (which can also be used for issuing commands) the data. Unfortunately, the OASIS standard introduces limited security capabilities (offering only username/password authentication) and no auditing or logging.

\subsection{FlyTrap}
This project will be aiming to develop a novel approach - further referred to as \textbf{FlyTrap} - for handling security in systems utilising MQTT brokers and their implementations, focusing on platform-agnostic solution hosted within a containerised environment. It will not depend on the specific software implementing the broker but instead will aim to work with any broker that fully implements MQTT v5.0 standard. Furthermore, to ensure decentralised operation resistant to data breaches, downtime and full transparency, Ethereum\footnote{https://ethereum.org/} platform would be used as a data layer: capturing relevant interaction as publicly available transactions. In order to limit the quantity of data put on the blockchain (as computational and storage power there is limited), I will also introduce several rules dictating logging of only specific events. The system's purpose is to incorporate \textbf{Authentication, Authorisation} and \textbf{Accountability} (AAA) framework to IoT devices communicating through MQTT.

\section{Motivation}

\subsection{MQTT}
MQTT v5.0 (as per the specification\footnote{https://docs.oasis-open.org/mqtt/mqtt/v5.0/mqtt-v5.0.html}) does not dictate nor specify any requirements regarding the security. It does offer an option of restricting some topics only to specific users, defined in access control lists (ACLs). The users then are required to provide a password when initiating a connection with the broker. Although, the basic username/password authentication is known to be cumbersome, only offering limited security. This also puts a burden on system administrators to maintain those ACLs in some centralised system, which then again is at risk of breaches or leakage. Moreover, placing the burden on a singular MQTT broker creates a single point of failure, where system downtime could halt the entire architecture.
\subsection{Blockchain}
By decentralising the data layer of the AAA framework and in the process, placing it on a distributed ledger, I can ensure maximised uptime and complete transparency of performed transactions. Events such as permission changes, failed authentication attempts will be recorded as a separate transaction which then could be audited by anyone knowing the public address of the system. This then could be handed over to authorities or auditing corporations to ensure that data is passed lawfully. Utilising Blockchain technologies also opens an opportunity to require payment (in the form of cryptocurrency) from potential consumers of data effectively expanding the business model. 
\subsection{Legislature}
The rise of awareness of the necessity of data protection also encouraged governments to introduce legal requirements (such as GDPR or CCPA) of data governance and face heave fines in case of non-compliance. MQTT standard and their implementation at the moment would be considered non-compliant, due to effectively no way to trace past operations. General Data Protection Regulation requires entities handling user data to maintain proper retention of data and purge if requested by the data owner. MQTT at its current state is not capable of either, as messages are removed from the broker as soon as they are consumed (with small exceptions), leaving no trace of ``who'' accessed ``what'' (not to mention questions such as ``why'' they accessed it).


\section{Goals}

The project can be divided onto four main goals and two extras, leaving some field for manoeuvring in case of roadblocks or difficulties resulting from the challenges faced in the dissertation. By having soft targets, I will be able to stop sooner in case of overestimating the schedule, or carrying on with extra work, should I find myself meeting the targets quicker than expected. 

\paragraph{Main Goals:}
\begin{enumerate}
  \item Design structure of blockchain network, relevant data models that would be placed on the blockchain and deploy on the Ethereum platform, capable of recording transactions and allowing for modification of ACLs, i.e. which wallets are permitted to access specific resources on the MQTT brokers.
  \item Design rules that would be used for capturing the transactions. For example, a rule stating that if the client makes more than five consecutive, failed authentication attempts would be placed on a blacklist and that action would be added onto the blockchain as a transaction. 
  \item Design containerised software acting as a secure proxy between brokers and connecting clients. This will handle both authentication and log performed action as an immutable transaction on a blockchain network. Logging will only be performed if the requested operation triggers some pre-defined rules.
  \item Perform evaluation of the designed solution using an off the shelf MQTT broker and a range of experimental scenarios with a simulated network of MQTT clients.
\end{enumerate}

\paragraph{Extra Goals:}
\begin{enumerate}
  \item Create public API for the auditors to freely access the contents of blockchain and thus transactions containing information about suspicious operations.
  \item Generalise the implementation of the framework so it can be deployed with any broker following the MQTT standard.
\end{enumerate}

\paragraph{What project is NOT trying to be:}
\begin{itemize}
  \item Design a new blockchain platform from scratch. Rather existing solution - Ethereum - is going to be used.
  \item Write / modify operating system of IoT devices.
  \item Design a new MQTT Broker. The system is going to be built on top of MQTT layer.
\end{itemize}

\section{Report Structure}

The dissertation is going to be divided onto seven chapters, each describing the following aspects of the project:
\begin{itemize}[leftmargin=4.5em]
  \item[Chapter 1] \textbf{Introduction} chapter will outline the main motivation behind the project and introduce the notions used a building block in the design. It will also list goals and no-goals defining success.
  \item[Chapter 2] In \textbf{Background \& Related Work}, similar research and state of the art will be described along with outlining the differences between them and this project. Furthermore, a thorough explanation of used software will also be attached, such as what is blockchain, Ethereum, MQTT. 
  \item[Chapter 3] \textbf{Requirements \& Architecture} will include analysis of both functional and non-functional requirements, main use-cases that are driving the project and high-level overview of the architecture explaining how each element addresses each of the requirements.
  \item[Chapter 4] \textbf{Design} will be an expansion to architecture, providing an explanation on how each of the elements connects to another.
  \item[Chapter 5] \textbf{Implementation} will talk about the process of implementation of the design into software. It will include notions such as followed processes, used frameworks and sample code snippets.
  \item[Chapter 6] Inside \textbf{Testing \& Evaluation} a comparison between state-of-the-art software, vanilla and FlyTrap will be performed. Tests checking for performance impact and whether the common attack can be detected/stopped will also be run.
  \item[Chapter 7] \textbf{Discussion \& Future Work} will include conclusions of the project, elements that were left-over, but beneficial for future iteration and all blockages encountered throughout. 
\end{itemize}
